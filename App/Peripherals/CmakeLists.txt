

# # 添加所有的 .cpp 文件
# file(GLOB APP_SOURCES "*.cpp")

set(APP_SOURCES
    ./Src/adc.cpp
    ./Src/generic_gpio.cpp
    ./Src/spi.cpp 

    ./Src/main.cpp
)

# 创建可执行文件
add_executable(peripherals ${APP_SOURCES})

#包含 cmake 文件夹中的头文件
target_include_directories(peripherals PUBLIC
    #  ${CMAKE_SOURCE_DIR}/Core/Inc
    #  ${CMAKE_SOURCE_DIR}/Drivers/STM32F1xx_HAL_Driver/Inc

    #  ${CMAKE_SOURCE_DIR}/Core/Inc
    #  ${CMAKE_SOURCE_DIR}/Drivers/STM32F1xx_HAL_Driver/Inc
    #  ${CMAKE_SOURCE_DIR}/Drivers/STM32F1xx_HAL_Driver/Inc/Legacy
    #  ${CMAKE_SOURCE_DIR}/Drivers/CMSIS/Device/ST/STM32F1xx/Include
    #  ${CMAKE_SOURCE_DIR}/Drivers/CMSIS/Include
    ${CMAKE_CURRENT_SOURCE_DIR}/Inc
)

# 链接 stm32cubemx 库
#target_link_directories(peripherals PRIVATE ${CMAKE_SOURCE_DIR}/cmake/stm32cubemx)

target_link_libraries(peripherals stm32cubemx)